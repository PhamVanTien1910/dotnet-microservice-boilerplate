{
    "AllowedHosts": "*",
    "CorsSettings": {
        "AllowedOrigins": [
            "http://localhost:3000",
            "http://localhost:4200"
        ],
        "PreflightMaxAgeSeconds": 86400
    },
    "App": {
        "Name": "Boilerplate.Gateway",
        "Version": "1.0.0",
        "Instance": "local"
    },

    "HealthChecks": {
        "Route": "/health",
        "AllowCachingResponses": false,
        "EnableDetailedOutput": false
    },

    "Redis": {
        "ConnectionString": "redis:6379",
        "Enabled": true,
        "TimeoutSeconds": 10
    },

    "RateLimiting": {
        "Enabled": true,
        "FixedWindow": {
            "WindowSeconds": 10,
            "PermitLimit": 100,
            "PolicyName": "fixed"
        }
    },

    "ReverseProxy": {
        "Routes": {
            "iam-route": {
                "ClusterId": "iam-cluster",
                "Match": {
                    "Path": "/api/iam/{**catch-all}"
                },
                "Transforms": [
                    { "PathPattern": "/api/{**catch-all}" },
                    { "RequestHeadersCopy": "true" }
                ]
            },
            "shop-route": {
                "ClusterId": "shop-cluster",
                "Match": {
                    "Path": "/api/shop/{**catch-all}"
                },
                "Transforms": [
                    { "PathPattern": "/api/{**catch-all}" },
                    { "RequestHeadersCopy": "true" }
                ]
            },
            "minio-route": {
                "ClusterId": "minio-cluster",
                "Match": {
                    "Path": "/api/minio/{**catch-all}"
                },
                "Transforms": [
                    { "PathPattern": "/{**catch-all}" },
                    { "RequestHeadersCopy": "true" }
                ]
            }
        },
        "Clusters": {
            "iam-cluster": {
                "Destinations": {
                    "destination1": {
                        "Address": "http://iam-api:8080"
                    }
                },
                "HealthCheck": {
                    "Active": {
                        "Enabled": true,
                        "Interval": "00:00:30",
                        "Timeout": "00:00:05",
                        "Policy": "ConsecutiveFailures",
                        "Path": "/health"
                    }
                }
            },
            "shop-cluster": {
                "Destinations": {
                    "destination1": {
                        "Address": "http://shop-api:8080"
                    }
                },
                "HealthCheck": {
                    "Active": {
                        "Enabled": true,
                        "Interval": "00:00:30",
                        "Timeout": "00:00:05",
                        "Policy": "ConsecutiveFailures",
                        "Path": "/health"
                    }
                }
            }
        }
    }
}
